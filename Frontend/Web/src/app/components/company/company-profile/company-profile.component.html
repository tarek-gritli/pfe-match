<div class="profile-container">
  <main class="profile-main">
    <div class="profile-content">
      <!-- Header with Edit Button -->
      <div class="profile-header">
        <h1 class="profile-title">Company Profile</h1>
        <app-button variant="default" (buttonClick)="navigateToEdit()">
          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z"/>
            <path d="m15 5 4 4"/>
          </svg>
          Edit Profile
        </app-button>
      </div>

      <div class="profile-grid">
        <!-- Left Column -->
        <div class="profile-left-column">
          <!-- Company Overview -->
          <app-card>
            <app-card-content>
              <div class="profile-overview">
                <app-avatar
                  [src]="getProfileImageUrl(currentEnterprise.logo) || ''"
                  [fallback]="getInitials(currentEnterprise.name)"
                  size="xl">
                </app-avatar>

                <div class="profile-info">
                  <h2 class="profile-name">{{ currentEnterprise.name }}</h2>
                  <app-badge variant="secondary">
                    {{ currentEnterprise.industry }}
                  </app-badge>
                  <div class="company-meta">
                    <div class="meta-item">
                      <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z"/>
                        <circle cx="12" cy="10" r="3"/>
                      </svg>
                      <span>{{ currentEnterprise.location }}</span>
                    </div>
                    <div class="meta-item">
                      <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/>
                        <circle cx="9" cy="7" r="4"/>
                        <path d="M23 21v-2a4 4 0 0 0-3-3.87"/>
                        <path d="M16 3.13a4 4 0 0 1 0 7.75"/>
                      </svg>
                      <span>{{ currentEnterprise.size }}</span>
                    </div>
                    @if (currentEnterprise.foundedYear) {
                      <div class="meta-item">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                          <path d="M8 2v4"/>
                          <path d="M16 2v4"/>
                          <rect width="18" height="18" x="3" y="4" rx="2"/>
                          <path d="M3 10h18"/>
                        </svg>
                        <span>Founded {{ currentEnterprise.foundedYear }}</span>
                      </div>
                    }
                  </div>
                </div>
              </div>

              @if (currentEnterprise.description) {
                <div class="profile-bio">
                  <p>{{ currentEnterprise.description }}</p>
                </div>
              }
            </app-card-content>
          </app-card>

          <!-- Technologies & Stack -->
          <app-card>
            <app-card-header>
              <app-card-title>
                <div class="card-title-with-icon">
                  <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <rect width="20" height="20" x="2" y="2" rx="2"/>
                    <path d="m6 6 12 12"/>
                    <path d="m18 6-12 12"/>
                  </svg>
                  Technologies & Stack
                </div>
              </app-card-title>
            </app-card-header>
            <app-card-content>
              <div class="skill-tags">
                @for (tech of currentEnterprise.technologies; track tech) {
                  <app-badge variant="default" class="gradient-badge">
                    {{ tech }}
                  </app-badge>
                }
                @if (currentEnterprise.technologies.length === 0) {
                  <p class="empty-message">No technologies listed</p>
                }
              </div>
            </app-card-content>
          </app-card>

          <!-- Links & Contact -->
          <app-card>
            <app-card-header>
              <app-card-title>
                <div class="card-title-with-icon">
                  <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"/>
                    <path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"/>
                  </svg>
                  Links & Contact
                </div>
              </app-card-title>
            </app-card-header>
            <app-card-content>
              <div class="links-container">
                @if (currentEnterprise.website) {
                  <a [href]="currentEnterprise.website" target="_blank" rel="noopener noreferrer" class="link-item">
                    <svg class="link-icon primary-icon" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><path d="M2 12h20"/><path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"/></svg>
                    <span>Company Website</span>
                  </a>
                }
                @if (currentEnterprise.linkedinUrl) {
                  <a [href]="currentEnterprise.linkedinUrl" target="_blank" rel="noopener noreferrer" class="link-item">
                    <svg class="link-icon linkedin-icon" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z"/><rect width="4" height="12" x="2" y="9"/><circle cx="4" cy="4" r="2"/></svg>
                    <span>LinkedIn Page</span>
                  </a>
                }
                @if (currentEnterprise.contactEmail) {
                  <a [href]="getMailtoLink()" class="link-item">
                    <svg class="link-icon primary-icon" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect width="20" height="16" x="2" y="4" rx="2"/><path d="m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7"/></svg>
                    <span>{{ currentEnterprise.contactEmail }}</span>
                  </a>
                }
                @if (!currentEnterprise.website && !currentEnterprise.linkedinUrl && !currentEnterprise.contactEmail) {
                  <p class="empty-message">No links added yet</p>
                }
              </div>
            </app-card-content>
          </app-card>
        </div>

        <!-- Right Column -->
        <div class="profile-right-column">
          <!-- PFE Listings Stats -->
          <app-card>
            <app-card-header>
              <app-card-title>
                <div class="card-title-with-icon">
                  <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <rect width="20" height="20" x="2" y="2" rx="2"/>
                    <path d="M16 6H8"/>
                    <path d="M16 10H8"/>
                    <path d="M16 14H8"/>
                  </svg>
                  PFE Listings
                </div>
              </app-card-title>
            </app-card-header>
            <app-card-content>
              <div class="pfe-stats">
                <div class="stat-item">
                  <p class="stat-number primary">{{ openPfes.length }}</p>
                  <p class="stat-label">Open</p>
                </div>
                <div class="stat-item">
                  <p class="stat-number">{{ enterprisePfes.length }}</p>
                  <p class="stat-label">Total</p>
                </div>
              </div>
              <app-button variant="outline" class="manage-pfes-button" (buttonClick)="navigateToManagePfes()">
                Manage PFEs
              </app-button>
            </app-card-content>
          </app-card>

          <!-- Company Details -->
          <app-card>
            <app-card-header>
              <app-card-title>Company Details</app-card-title>
            </app-card-header>
            <app-card-content>
              <div class="details-list">
                <div class="detail-row">
                  <span class="detail-label">Industry</span>
                  <span class="detail-value">{{ currentEnterprise.industry }}</span>
                </div>
                <div class="detail-row">
                  <span class="detail-label">Size</span>
                  <span class="detail-value">{{ currentEnterprise.size }}</span>
                </div>
                <div class="detail-row">
                  <span class="detail-label">Location</span>
                  <span class="detail-value">{{ currentEnterprise.location }}</span>
                </div>
                @if (currentEnterprise.foundedYear) {
                  <div class="detail-row">
                    <span class="detail-label">Founded</span>
                    <span class="detail-value">{{ currentEnterprise.foundedYear }}</span>
                  </div>
                }
              </div>
            </app-card-content>
          </app-card>
        </div>
      </div>
    </div>
  </main>
</div>