<div class="edit-profile">
  <!-- Header -->
  <header class="header">
    <div class="header-content">
      <div class="header-left">
        <button class="back-btn" (click)="goBack()">
          <span>‚Üê</span>
        </button>
        <h1 class="title">Profile & Settings</h1>
      </div>
      <button class="save-btn" (click)="saveProfile()">Save</button>
    </div>
  </header>

  <!-- Content -->
  @if (!isLoading) {
  <main class="content">
    <!-- Profile Photo -->
    <section class="identity-band">
    <div class="identity-left">
    <section class="profile-photo">
      <div class="avatar-container">
        <div class="avatar-wrapper">
          <img [src]="profileData.imageUrl" alt="Profile" class="avatar">
        </div>
        <button class="camera-btn" (click)="changeProfilePhoto()">
          <span>üì∑</span>
        </button>
      </div>
      <div class="identity-text">
      <h2 class="name">{{ profileData.name }}</h2>
      <p class="subtitle">{{ profileData.title }}</p>
      </div>
    </section>
    </div>

    <!-- Profile Visibility -->
    <div class="identity-right">
    <app-card-container [gradient]="true">
      <div class="visibility-header">
        <div class="visibility-title">
          <span class="icon">üìä</span>
          <span class="label">Profile Visibility</span>
        </div>
        <span class="percentage">{{ profileIntegrity }}%</span>
      </div>
      <div class="progress-bar">
        <div class="progress-fill" [style.width.%]="profileIntegrity"></div>
      </div>
      <div class="suggestion-box">
        <div class="suggestion-icon">üí°</div>
        <div class="suggestion-content">
          <h3 class="suggestion-title">Skill Gap Identified</h3>
          <p class="suggestion-text">
            Add <strong>React</strong> and <strong>AWS</strong> to increase PFE matches by 45%.
          </p>
        </div>
      </div>
    </app-card-container>
    </div>
    </section>

    <!-- Basic Details -->
     <section class="editor-column">
    <app-card-container>
      <h3 class="section-label">BASIC DETAILS</h3>
      <div class="card">
        <app-form-field
          label="FULL NAME"
          placeholder="John Doe"
          [(ngModel)]="profileData.name">
        </app-form-field>
        <app-form-field
          label="UNIVERSITY / SCHOOL"
          placeholder="Enter your institution"
          [(ngModel)]="profileData.university">
        </app-form-field>
        <app-form-field
          label="SPECIALIZATION / FIELD"
          placeholder="e.g. Data Science"
          [(ngModel)]="profileData.title">  <!-- will add specialization later-->
        </app-form-field>
        <div class="form-group">
          <label class="input-label">BIO & OBJECTIVES</label>
          <textarea 
            class="input-field textarea" 
            rows="5"
            [(ngModel)]="profileData.summary"
            placeholder="Tell companies about your goals..."></textarea>
        </div>
      </div>
    </app-card-container>

    <!-- Skills & Technologies -->
    <app-card-container>
      <h3 class="section-label">SKILLS & TECHNOLOGIES</h3>
      <div class="card">
        <!-- Core Skills -->
        <div class="skills-group">
          <label class="skill-label">CORE SKILLS</label>
          <div class="skill-chips">
            @for (skill of skills; track skill.name) {
              <span class="skill-chip primary">
                {{ skill.name }}
                <button class="remove-btn" (click)="removeSkill(skill)">√ó</button>
              </span>
            }
          </div>
          <div class="add-skill">
            <input 
              type="text" 
              class="input-field" 
              [(ngModel)]="newSkill"
              (keyup.enter)="addSkill()"
              placeholder="Add a skill...">
            <button class="add-icon" (click)="addSkill()">‚ûï</button>
          </div>
        </div>

        <!-- Favorite Technologies -->
        <div class="skills-group">
          <label class="skill-label">FAVORITE TECHNOLOGIES</label>
          <div class="skill-chips">
            @for (tool of tools; track tool.name) {
              <span class="skill-chip secondary">
                {{ tool.name }}
                <button class="remove-btn" (click)="removeTool(tool)">√ó</button>
              </span>
            }
          </div>
          <div class="add-skill">
            <input 
              type="text" 
              class="input-field" 
              [(ngModel)]="newTool"
              (keyup.enter)="addTool()"
              placeholder="e.g. Terraform, Figma">
            <button class="add-icon" (click)="addTool()">‚ûï</button>
          </div>
        </div>
      </div>
    </app-card-container>
    </section>
    <!-- Resume & Portfolio -->
    @if (resume) {
    <app-card-container [border]="true" class="resume-card">
      <h3 class="section-label">RESUME & PORTFOLIO</h3>
      <div class="card resume-card">
        <div class="resume-icon">üìÑ</div>
        <h3 class="resume-filename">{{ resume.filename }}</h3>
        <p class="resume-meta">Uploaded on {{ resume.lastUpdated }} ‚Ä¢ {{ resume.size }}</p>
        <div class="resume-actions">
          <button class="replace-btn" (click)="replaceResume()">Replace</button>
          <button class="delete-icon-btn" (click)="deleteResume()">
            <span>üóëÔ∏è</span>
          </button>
        </div>
      </div>
    </app-card-container>
    }
  </main>
}
</div>